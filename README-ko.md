# KorSubset

한글 폰트 서브셋을 간편하게 만들 수 있는 도구입니다.

## 개요

모든 한글을 올바르게 표시하기 위한 글리프 수는 17,388개에 달하기 때문에 상당한 용량을 차지합니다. 따라서 용량이 곧 로딩 속도와 직결되는 웹에서 한글 폰트를 사용할때는 주로 서브셋(subset)을 만들어 사용하곤 했습니다. KS X 1001 서브셋이 가장 대표적이지만, 이는 2350자밖에 지원하지 않으므로 외래어 표기 등에서 불편함을 느껴야 했습니다. 또한, 사용자의 입력이 가능한 영역에는 어쩔 수 없이 전체 폰트를 내려받아야 합니다.

2018년 Google에서 발표한 [Google Fonts + 한국어](https://googlefonts.github.io/korean/) 프로젝트는 이러한 불편함을 해결하기 위하여, 머신 러닝 기반으로 한글을 120개의 그룹으로 나누어 호스팅하고 있습니다. CSS의 `unicode-range` 속성을 사용하여 현재 페이지를 로드하는 데에 필요한 서브셋들만 내려받을 수 있으므로 로딩 속도를 상당히 단축시킬 수 있는 방법입니다. 그러나 Google Fonts에서 제공하는 폰트만 사용할 수 있다는 단점이 있기 때문에, 원하는 폰트를 사용할 수 없다는 한계가 있습니다.

따라서 원하는 폰트를 Google Fonts의 서브셋과 같은 양식으로 서브세팅을 하고, CSS 파일까지 생성해주는 스크립트를 만들게 되었습니다. WOFF 및 WOFF2 확장자로 폰트를 변환하여 더욱 적은 용량으로 호스팅할 수 있으며, font의 CSS 속성도 모두 인자를 사용하여 지정 가능합니다.

## 설치

```shell
pip install korsubset
```

## 사용법

```shell
korsubset {font_name}
```

### 예시

```shell
korsubset 'my_font.otf' --output-dir='./my_font/' --font-url='/my_font/'
```

### 옵션

| 이름             | 설명                                                         | 기본값             |
| ---------------- | ------------------------------------------------------------ | ------------------ |
| `-h`, `--help`   | 도움말을 표시                                                |                    |
| `--output-dir=`  | 서브셋이 생성될 디렉토리                                     | `./output`         |
| `--noexport-css` | 이 플래그가 있으면 CSS 파일이 생성되지 않음                  |                    |
| `--font-url=`    | CSS 파일의 `src` 프로퍼티의 경로                             | `/`                |
| `--family=`      | CSS 파일의 `family` 프로퍼티의 값                            | 폰트 파일의 family |
| `--style=`       | CSS 파일의 `style` 프로퍼티의 값                             | 폰트 파일의 style  |
| `--weight=`      | CSS 파일의 `weight` 프로퍼티의 값                            | `400`              |
| `--format=`      | 출력 확장자의 종류. `woff`, `woff2` 혹은 `woff,woff2`가 가능 | `woff2`            |

## 주의사항

이 스크립트는 폰트를 변형하여 서브셋을 생성합니다. 폰트의 라이선스를 확인하고 사용해 주시기 바랍니다. 또한, 이 스크립트는 일반적인 한글 폰트에 대한 유니코드 범위만을 포함합니다. 원래 폰트에 포함된 합자(ligature), 이모지(emoji), 한자와 같은 문자들이 소실될 수 있습니다.
